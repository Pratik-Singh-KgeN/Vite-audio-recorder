// --- Variables ---
$primary-color: #8CFF05; // Lime-400
$progress-color: #8CFF05; // Lime-200
$bg-dark: #111827; // Gray-900
$card-bg: #1F3338;
$border-color: #30363d;
$control-bg: #21262d;
$text-primary: #f3f4f6; // Gray-100
$text-secondary: #9ca3af; // Gray-400
$red-500: #ef4444;
$red-400: #f87171;

// --- Mixins ---
@mixin transition($property: all, $duration: 0.2s, $timing: ease) {
  transition: $property $duration $timing;
}

// --- Main Container ---
.audio-recorder-app {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  background-color: $bg-dark;
  padding: 1rem;
  font-family: 'Monaco', 'Courier New', monospace;
  color: $text-primary;

  ::selection {
    background-color: $primary-color;
    color: #000;
  }
}

// --- Mode Switcher ---
.mode-switcher {
  margin-bottom: 2rem;
  display: flex;
  gap: 1.5rem;
  font-size: 0.875rem;
  background-color: rgba(31, 41, 55, 0.5);
  padding: 0.5rem;
  border-radius: 9999px;
  border: 1px solid rgba(55, 65, 81, 0.5);
  backdrop-filter: blur(4px);

  .mode-option {
    display: flex;
    align-items: center;
    cursor: pointer;
    gap: 0.5rem;
    padding: 0.375rem 1rem;
    border-radius: 9999px;
    color: $text-secondary;
    @include transition();

    input[type="radio"] {
      display: none;
    }

    &:hover {
      color: $text-primary;
    }

    &.active {
      background-color: $primary-color;
      color: #000;
      font-weight: 700;
    }
  }
}

// --- Recorder Card ---
.recorder-card {
  width: 100%;
  max-width: 600px;
  background-color: $card-bg;
  border: 1px solid $border-color;
  border-radius: 0.75rem;
  box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
  overflow: hidden;
  position: relative;

  .card-glow {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 1px;
    background: linear-gradient(
      to right,
      transparent,
      rgba($primary-color, 0.5),
      transparent
    );
  }
}

// --- Card Content ---
.card-content {
  padding: 2rem;
  position: relative;

  .close-button {
    position: absolute;
    bottom: 2rem;
    left: 2rem;
    padding: 0.625rem;
    background-color: rgba(31, 41, 55, 0.5);
    border: none;
    border-radius: 0.5rem;
    color: $text-secondary;
    cursor: pointer;
    z-index: 20;
    @include transition();

    &:hover {
      background-color: #374151;
    }
  }
}

// --- Waveform Container ---
.waveform-container {
  position: relative;
  margin-bottom: 1.5rem;
  height: 40px;
  width: 100%;
  overflow: hidden;
//   background-color: #1F3338;
//   border: 1px solid rgba(31, 41, 55, 0.5);

  .waveform-background {
    position: absolute;
    inset: 0;
    top: 25%;
    // transform: translateY(-50%);
    width: 100%;
    height: 40px;
    opacity: 0.2;
    pointer-events: none;
    background-image: repeating-linear-gradient(
      90deg,
      transparent 0,
      #6b7280 2px,
      transparent 2px,
      transparent 5px
    );
    @include transition(opacity, 0.3s);
  }

  .waveform-wrapper {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: 10;
  }
}

// --- Timers ---
.timers {
  display: flex;
  justify-content: space-between;
  align-items: center;
  font-size: 0.75rem;
  font-family: 'Monaco', 'Courier New', monospace;
  letter-spacing: 0.05em;
  color: rgba($primary-color, 0.8);
  margin-bottom: 2.5rem;
  padding: 0 0.25rem;
}

// --- Controls ---
.controls {
  display: flex;
  align-items: center;
  justify-content: space-between;
  height: 4rem;
  position: relative;

  .controls-left,
  .controls-center,
  .controls-right {
    flex: 1;
    display: flex;
  }

  .controls-left {
    justify-content: flex-start;

    .control-group {
      display: flex;
      gap: 0.75rem;
    }
  }

  .controls-center {
    justify-content: center;

    .button-spacer {
      width: 4rem;
      height: 4rem;
    }
  }

  .controls-right {
    justify-content: flex-end;
    gap: 0.75rem;
  }
}

// --- Control Buttons ---
.control-button {
  padding: 0.875rem;
  border-radius: 0.5rem;
  background-color: $control-bg;
  border: 1px solid #374151;
  color: $text-secondary;
  cursor: pointer;
  @include transition();

  &:hover {
    background-color: #374151;
  }

  &.delete-button {
    &:hover {
      background-color: rgba(127, 29, 29, 0.2);
      color: $red-400;
      border-color: rgba(153, 27, 27, 0.5);
    }
  }

  &.pause-button,
  &.resume-button {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1rem;
    color: $text-primary;
    font-weight: 700;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
  }

  &.play-button {
    color: $primary-color;

    &.disabled {
      background-color: rgba($control-bg, 0.5);
      color: #4b5563;
      border-color: #1f2937;
      cursor: not-allowed;

      &:hover {
        background-color: rgba($control-bg, 0.5);
      }
    }
  }

  &.upload-button {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    background-color: $primary-color;
    color: #111827;
    font-weight: 700;
    font-size: 0.75rem;
    letter-spacing: 0.05em;
    box-shadow: 0 10px 15px -3px rgba(127, 185, 0, 0.2);

    &:hover {
      background-color: #bef264;
    }

    .upload-text {
      @media (max-width: 640px) {
        display: none;
      }
    }
  }
}

// --- Main Action Buttons ---
.main-button {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 4rem;
  height: 4rem;
  border-radius: 50%;
  border: none;
  cursor: pointer;
  @include transition();

  &:active {
    transform: scale(0.95);
  }

  &.record-button {
    background-color: $primary-color;
    box-shadow: 0 0 15px rgba($primary-color, 0.2);

    .icon {
      color: #03aa8e;
    }
    &:hover .icon {
      color: #8CFF05;
    }

    &:hover {
      background-color: #1F3338;
    }

    .button-ripple {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      border: 1px solid #8CFF05;
      opacity: 0;
      transform: scale(1);
      @include transition(all, 0.5s);
    }

    &:hover .button-ripple {
      opacity: 0.5;
      transform: scale(1.25);
    }
  }

  &.stop-button {
    background-color: $red-500;
    box-shadow: 0 0 20px rgba($red-500, 0.4);

    &:hover {
      background-color: $red-400;
    }

    .button-pulse {
      position: absolute;
      inset: 0;
      border-radius: 50%;
      border: 1px solid rgba($red-400, 0.5);
      transform: scale(1.1);
      animation: pulse 1.5s infinite;
    }

    .stop-square {
      width: 1.25rem;
      height: 1.25rem;
      background-color: #fff;
      border-radius: 0.125rem;
    }
  }
}

// --- Progress Bar ---
.progress-bar {
  position: absolute;
  bottom: 0;
  left: 0;
  height: 0.125rem;
  background-color: rgba($primary-color, 0.5);
  transition: width 0.1s linear;
}

// --- Animations ---
@keyframes pulse {
  0%,
  100% {
    opacity: 1;
    transform: scale(1.1);
  }
  50% {
    opacity: 0;
    transform: scale(1.3);
  }
}
